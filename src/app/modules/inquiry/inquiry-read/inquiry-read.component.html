<div *ngIf="$inquiry | async as inquiry">
  <div class="row">
    <div class="col-md-12">
      <app-inquiry-info-edit title="Заявление {{inquiry.number}}">
        <div class="row">
          <div class="col-md-6">
            <h4>Заявление в {{inquiry.typeFriendlyName}}</h4>
            <app-inquiry-common-info [inquiry]="inquiry">
              <div class="form-group">
                <b>Заявление на перевод</b>Нет
              </div>
              <div *ngIf="inquiry && inquiry.privilege && inquiry.privilege.privilegeOrder">
                <div class="form-group">
                  <b>Льгота</b> {{inquiry.privilege.privilegeOrder.name}}
                  <br>
                  <i>{{inquiry.privilege.name}}</i>
                </div>
                <div class="form-group">
                  <b>Документ, подтверждающий льготу</b> {{getDocumentView(inquiry.privilege.privilegeProofDocument)}}
                </div>
              </div>
              <div class="form-group">
                <b>Доп. информация</b>{{inquiry.addInformation}}
              </div>
            </app-inquiry-common-info>
          </div>
        </div>
        <div class="button-row" [formGroup]="statusForm">
          <mat-form-field style="width: 70%">
            <mat-select placeholder="Перевести в статус" formControlName="status" #status>
              <mat-option *ngFor="let status of statuses" [value]="status.id">
                {{status.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <button type="button" class="btn btn-primary" (click)="changeStatus(status.value)">Выполнить</button>
        </div>
      </app-inquiry-info-edit>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6" *ngIf="inquiry.applicant">
      <app-inquiry-info-edit title="Доверенное лицо законного представителя ребенка">
        <app-person-card [entity]="$applicant" [personType]="personTypes.Applicant" [mode]="modes.Edit"></app-person-card>
        <app-citizenships-card [model]="inquiry.applicant" [mode]="modes.Edit" [personType]="personTypes.Applicant"
          [applicantType]="inquiry.applicantType">
        </app-citizenships-card>
        <app-confirmation-document-card title="Документ, подтверждающий полномочие доверенного лица представлять интересы законного представителя"
          [model]="$applicantRepresentParentDocument" [mode]="modes.Edit">
        </app-confirmation-document-card>
      </app-inquiry-info-edit>
    </div>
    <div class="col-md-6" *ngIf="inquiry.parent">
      <app-inquiry-info-edit title="Законный представитель">
        <app-person-card [entity]="$parent" [personType]="personTypes.Parent" [mode]="modes.Edit"></app-person-card>
        <app-citizenships-card [model]="inquiry.parent" [mode]="modes.Edit" [personType]="personTypes.Parent"
          [applicantType]="inquiry.applicantType"> </app-citizenships-card>
        <app-relation-type-card [model]="inquiry.parent" [mode]="modes.Edit"></app-relation-type-card>
      </app-inquiry-info-edit>
    </div>
  </div>
  <app-children-card [children]="children" [mode]="modes.Edit" [inquiryType]="inquiry.type" [specHealth]="inquiry.specHealth"></app-children-card>
  <app-school-inquiry-info-card [schoolInquiryInfo]="inquiry.schoolInquiryInfo" [edit]="edit.schoolInquiryInfo" *ngIf="inquiry.schoolInquiryInfo"></app-school-inquiry-info-card>
  <app-preschool-inquiry-info-card [inquiryInfo]="inquiry.inquiryInfo" [edit]="edit.inquiryInfo" *ngIf="inquiry.type == inquiryTypes.preschool"></app-preschool-inquiry-info-card>
  <div class="row">
    <div class="col-md-4">
      <app-contact-info-card [contactInfo]="inquiry.contactInfo" [edit]="edit.contactInfo"></app-contact-info-card>
    </div>
    <div class="col-md-4">
      <app-institutions-card [institutions]="inquiry.institutions" [edit]="edit.institutions" *ngIf="inquiry.type == inquiryTypes.preschool"></app-institutions-card>
      <app-school-classes-card [schoolClasses]="inquiry.schoolClasses" [IsLearnEducCenter]="inquiry.IsLearnEducCenter"
        [edit]="edit.institutions" *ngIf="inquiry.type == inquiryTypes.school"></app-school-classes-card>
    </div>
    <div class="col-md-4">
      <app-current-education-place-card [currentEducationPlace]="inquiry.currentEducationPlace" [edit]="edit.currentEducationPlace"></app-current-education-place-card>
    </div>
  </div>
  <div class="row">
    <div class="col-md-4">
      <app-privilege-card [mode]="modes.Edit" [model]="inquiry.privilege">
      </app-privilege-card>
    </div>
    <div class="col-md-4">
      <app-petition-card [petition]="inquiry.petition" [edit]="edit.petition"></app-petition-card>
    </div>
    <div class="col-md-4">
      <app-files-card [filesInfo]="inquiry.filesInfo" [edit]="edit.fileAttachments"></app-files-card>
    </div>
  </div>


</div>